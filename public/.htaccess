
# Use PHP5 as default
AddHandler application/x-httpd-php5 .php
Redirect 301 /lifespandb http://lifespandb.sageweb.org
Redirect 301 /agingdb http://lifespandb.sageweb.org
Redirect 301 /yoda http://yoda.sageweb.org

php_flag file_uploads on
php_value upload_max_filesize 100M
php_value post_max_size 100M
php_value max_execution_time 60
php_value memory_limit 512M
php_value magic_quotes_gpc off


# add response comperssion
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

# cache images and css on client side
ExpiresActive on
ExpiresByType image/png "access plus 1 week"
ExpiresByType image/gif "access plus 1 week"
ExpiresByType image/jpeg "access plus 1 week"
ExpiresByType text/css "access plus 1 week"
ExpiresByType text/javascript "access plus 1 week"


RewriteEngine On

# remove www
RewriteCond %{HTTP_HOST} ^www.sageweb.org$ [NC]
RewriteRule ^(.*)$ http://sageweb.org/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

# route everthing else to front controller
RewriteRule ^.*$ index.php [NC,L]
